#!/usr/bin/env bash

YELLOW='\033[1;33m'
NC='\033[0m' # No Color

CWD="$(dirname "$0")"
cd "$CWD/../"
BASE_PATH=$(pwd)
ICON_PATH="components/Icon"
ICON_FULL_PATH="$BASE_PATH/$ICON_PATH"

echo -e "Prepare index file ... \n\n"
cat /dev/null > "$ICON_FULL_PATH/index.ts"

echo "Converting svg icons into react components ..."
svgr -d $ICON_PATH --ext tsx --template $ICON_PATH/_generatorTemplate.js --expand-props start $ICON_PATH/svg

for icon in $ICON_FULL_PATH/svg/*.svg; do
  basename=$(basename $icon | sed 's/\.svg$//');
  echo -e "\n\nAdding export statement for ${YELLOW}[$basename]${NC} ..."
  yarn hygen component icon $basename
done

yarn lint:path $ICON_FULL_PATH
yarn prettier-standard $ICON_FULL_PATH/**/*.tsx
