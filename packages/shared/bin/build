#!/usr/bin/env node

const path = require('path')
const sh = require('shelljs')
const { log, safeExec } = require('../../../bin/utils')

// typescript doesn't copy binaries, so we need to do it manually
function copyIcons() {
  log('Copying favicons', 'green')
  ;['staging', 'development', 'production'].forEach(env => {
    sh.cp(
      '-R',
      `src/Favicon/icons/${env}/*.png`,
      `./build/Favicon/icons/${env}/`
    )
  })
}

const cmd =
  path.resolve(__dirname, '../../../bin/build') +
  ' --tsConfig=./tsconfig.build.json'

function build() {
  safeExec(cmd)

  copyIcons()
}

build()
